<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro Candidato - Paso 2 - Jobly</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>body{font-family:'Poppins',sans-serif;}</style>
</head>
<body class="bg-white min-h-screen font-[Poppins,sans-serif]">
    <header class="flex items-center justify-between px-[30px] pt-[24px] pb-[16px] border-b border-[#e5eae8] h-[86px]">
        <a href="index.html" class="block h-[62px] w-[172px]">
        <img src="./images/logo-login.png" alt="Jobly Logo" class="h-full w-full object-contain" />
        </a>
        <div class="flex items-center gap-4">
        <div class="h-6 w-px bg-[#e5eae8]"></div>
        </div>
    </header>

  <!-- Subheader (Figma accurate) -->
  <section class="flex gap-[64px] items-end justify-center px-[108px] pt-[16px] pb-0 border-b border-[#e5eae8] relative">
    <div class="flex flex-col gap-[16px] items-center justify-center">
      <p class="text-[#606261] text-[20px] font-medium text-right"> </p>
      <img src="./images/line-divider.png" alt="Subheader Icon" class="h-0 w-full" />
    </div>
    
    <!-- Pattern decorations -->
    <div class="absolute bottom-0 left-[78px] top-0 w-[127px] opacity-10 pointer-events-none">
      <img src="./images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-5.51%] top-[-71.43%] w-[105.51%]" />
    </div>
    <div class="absolute bottom-0 left-[198px] top-0 w-[84px] opacity-10 pointer-events-none">
      <img src="./images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-7.14%] top-[-71.43%] w-[159.52%]" />
    </div>
    <div class="absolute bottom-0 right-[129px] top-0 w-[58px] opacity-10 pointer-events-none">
      <img src="./images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-58.62%] top-[-71.43%] w-[231.03%]" />
    </div>
    <div class="absolute bottom-0 right-0 top-0 w-[127px] opacity-10 pointer-events-none">
      <img src="./images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-5.51%] top-[-71.43%] w-[105.51%]" />
    </div>
  </section>

  <!-- Decorative composite people (bottom right) -->
  <div class="fixed right-[108px] bottom-0 w-[520px] max-w-[45vw] pointer-events-none z-0">
    <img src="./images/employer-step1-people.png" alt="Decoración" class="w-full h-auto" />
  </div>

  <!-- Main content -->
  <main class="flex flex-col items-center justify-start px-4 py-12 relative z-10">
    <div class="w-full max-w-[600px]">
      <!-- Top row: back + title + save/exit -->
      <div class="flex items-start justify-between mb-6">
        <div class="flex items-center gap-4">
          <button onclick='window.location.href="empleado-step1.html"' class="w-6 h-6 flex items-center justify-center" aria-label="Volver">
            <img src="./images/arrow-back.png" alt="Volver" class="w-full h-full" />
          </button>
          <h1 class="text-[32px] font-semibold text-black leading-[1.2]">Curriculum</h1>
        </div>
        <button 
        type="button" 
        onclick="window.location.href='index.html'" 
        class="text-[16px] font-semibold tracking-[0.48px] text-[#141514]">
        Save And Exit
        </button>
      </div>

      <!-- Subtitle -->
      <p class="text-[20px] font-medium text-[#767977] leading-[1.5] mb-6">
        El PDF de tu CV será enlazado en tu perfil, unicamente las empresas a las que postulas tendrán acceso a esta.
      </p>

      <!-- Progress bar (600 outer, 450 filled) -->
      <div class="w-[600px] h-2 bg-[#fff0f5] rounded-[16px] mb-10">
        <div class="h-2 w-[450px] bg-[#3b1329] rounded-[16px]"></div>
      </div>

      <!-- Form -->
      <form id="candidateStep2" class="space-y-6">
        <!-- Upload CV -->
        <div class="flex flex-col gap-2">
          <label for="cvfile" class="text-[20px] font-medium text-[#767977]">Upload CV *</label>
          <input id="cvfile" name="cvfile" type="file" accept="application/pdf"
                 class="w-full h-[53px] border border-[#cfd4d1] rounded-[4px] px-4 py-3 text-[14px] font-medium text-[#141514] focus:border-[#3b1329] focus:outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:bg-[#f5f5f5] file:text-[#141514] hover:file:bg-[#e5eae8]" />
        </div>

        <!-- Continue button -->
        <div class="pt-4">
          <button type="button" onclick="goToStep3()" class="bg-[#f23e8e] text-[#13060e] px-6 py-3 rounded-full font-semibold text-[16px] h-[48px] hover:bg-[#d93578] transition-colors">Continue</button>
        </div>
      </form>
    </div>
  </main>

  <script>
    // Load saved data if exists
    window.addEventListener('DOMContentLoaded', function() {
      const saved = localStorage.getItem('candidateRegistration');
      if(saved){
        try {
          const data = JSON.parse(saved);
          // No hay campos para cargar en step2 actualmente
        } catch(e){ /* ignore parse errors */ }
      }
    });
    
    function goToStep1(){
      window.location.href = 'empleado-step1.html';
    }
    
    async function goToStep3(){
      const saved = localStorage.getItem('candidateRegistration');
      let data = saved ? JSON.parse(saved) : {};
      localStorage.setItem('candidateRegistration', JSON.stringify(data));
      
      // Guardar el archivo CV si existe
      const cvInput = document.getElementById('cvfile');
      if (cvInput && cvInput.files && cvInput.files[0]) {
        const file = cvInput.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
          localStorage.setItem('candidateCV', e.target.result);
          window.location.href = 'empleado-step3.html';
        };
        reader.readAsDataURL(file);
      } else {
        window.location.href = 'empleado-step3.html';
      }
    }
  </script>
        const file = cvInput.files[0];
        const reader = new FileReader();
        reader.onload = function(e) {
          localStorage.setItem('candidateCV', e.target.result);
          window.location.href = 'empleado-step3.html';
        };
        reader.readAsDataURL(file);
      } else {
        window.location.href = 'empleado-step3.html';
      }
    }
  </script>
</body>
</html>