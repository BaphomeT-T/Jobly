<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <base href="/">
    <title>Registro Candidato - Paso 1 - Jobly</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>body{font-family:'Poppins',sans-serif;}</style>
    </head>
    <body class="bg-white min-h-screen font-[Poppins,sans-serif]">
        <!-- Header -->
    <header class="flex items-center justify-between px-[32px] pl-[32px] pr-[108px] pt-[24px] pb-[16px] border-b border-[#e5eae8] h-[86px] bg-white">
        <a href="/home-empresa" class="block h-[62px] w-[172px]">
            <img src="/static/images/logo-login.png" alt="Jobly Logo" class="h-full w-full object-contain"
                     onerror="this.onerror=null; this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27172%27 height=%2762%27%3E%3Crect width=%27172%27 height=%2762%27 fill=%27%23f23e8e%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27 fill=%27white%27 font-family=%27Arial%27 font-size=%2720%27%3EJobly%3C/text%3E%3C/svg%3E'" />
        </a>
        <div class="flex-1"></div>
        <div class="flex items-center gap-6">
            <!-- Help Icon -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="#141514" stroke-width="1.5" />
                <path d="M9.09 9C9.325 8.33 9.835 7.81 10.5 7.57C11.165 7.33 11.903 7.39 12.516 7.74C13.129 8.09 13.563 8.69 13.72 9.38C13.877 10.07 13.745 10.79 13.35 11.38C12.955 11.97 12.33 12.38 11.62 12.51V13.5" stroke="#141514" stroke-linecap="round" />
                <circle cx="12" cy="17" r="1" fill="#141514" />
            </svg>
            <!-- Mail Icon -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#141514" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M22 6L12 13L2 6" stroke="#141514" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <!-- Profile Icon (Purple) -->
            <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" fill="#c89bfa" />
                <circle cx="12" cy="10" r="3" fill="white" />
                <path d="M6.168 18.849A6.5 6.5 0 0 1 12 15.5a6.5 6.5 0 0 1 5.832 3.349" stroke="white" stroke-width="1.5" stroke-linecap="round" />
            </svg>
            <!-- Logout Button -->
            <button id="logoutBtn" class="border border-[#141514] text-[#141514] px-3 py-1 rounded-[24px] text-sm font-semibold hover:bg-[#141514] hover:text-white transition-colors">
                Cerrar sesión
            </button>
        </div>
    </header>

  <!-- Subheader (Figma accurate) -->
  <section class="flex gap-[64px] items-end justify-center px-[108px] pt-[16px] pb-0 border-b border-[#e5eae8] relative">
    <div class="flex flex-col gap-[16px] items-center justify-center">
      <p class="text-[#606261] text-[20px] font-medium text-right"> </p>
      <img src="/static/images/line-divider.png" alt="Subheader Icon" class="h-0 w-full" />
    </div>
    
    <!-- Pattern decorations -->
    <div class="absolute bottom-0 left-[78px] top-0 w-[127px] opacity-10 pointer-events-none">
      <img src="/static/images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-5.51%] top-[-71.43%] w-[105.51%]" />
    </div>
    <div class="absolute bottom-0 left-[198px] top-0 w-[84px] opacity-10 pointer-events-none">
      <img src="/static/images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-7.14%] top-[-71.43%] w-[159.52%]" />
    </div>
    <div class="absolute bottom-0 right-[129px] top-0 w-[58px] opacity-10 pointer-events-none">
      <img src="/static/images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-58.62%] top-[-71.43%] w-[231.03%]" />
    </div>
    <div class="absolute bottom-0 right-0 top-0 w-[127px] opacity-10 pointer-events-none">
      <img src="/static/images/pattern-login.png" alt="Pattern" class="absolute h-[239.29%] left-[-5.51%] top-[-71.43%] w-[105.51%]" />
    </div>
  </section>

    <!-- Main registration form -->
    <main class="flex flex-col items-center justify-start px-4 py-12 relative z-10">
        <div class="w-full max-w-[600px]">
            <!-- Top row: back + title + save/exit -->
            <div class="flex items-center justify-between mb-8">
                <div class="flex items-center gap-4">
                    <button onclick='window.location.href="/"' class="w-6 h-6 flex items-center justify-center" aria-label="Volver">
                        <img src="/static/images/arrow-back.png" alt="Volver" class="w-full h-full" />
                    </button>
                    <h1 class="text-[32px] font-semibold text-black leading-[1.2] capitalize">Proporciona información requerida</h1>
                </div>
                <button 
                type="button" 
                onclick="window.location.href='/'" 
                class="text-[16px] font-semibold tracking-[0.48px] text-[#141514]">
                Save And Exit
                </button>
            </div>

            <!-- Progress bar (step indicator) -->
            <div class="h-2 w-[243px] bg-[#3b1329] rounded-[16px] mb-12"></div>

            <!-- Candidate Step 1 Form -->
            <form id="candidateStep1" class="space-y-8" novalidate>
                <!-- Nombre & Apellido side-by-side -->
                <div class="flex flex-col md:flex-row md:gap-8 gap-8">
                    <div class="flex flex-col gap-2 md:w-1/2">
                        <label for="nombre" class="text-[16px] font-semibold text-[#141514] tracking-[0.48px]">Nombre</label>
                        <input id="nombre" name="nombre" type="text" required placeholder="Write your Name" class="h-[56px] px-4 py-4 border border-[#cfd4d1] rounded-[4px] text-[14px] font-medium text-[#141514] placeholder:text-[#b8bdbb] focus:border-[#3b1329] focus:outline-none" />
                    </div>
                    <div class="flex flex-col gap-2 md:w-1/2">
                        <label for="apellido" class="text-[16px] font-semibold text-[#141514] tracking-[0.48px]">Apellido</label>
                        <input id="apellido" name="apellido" type="text" required placeholder="Write your Last name" class="h-[56px] px-4 py-4 border border-[#cfd4d1] rounded-[4px] text-[14px] font-medium text-[#141514] placeholder:text-[#b8bdbb] focus:border-[#3b1329] focus:outline-none" />
                    </div>
                </div>

                <!-- Email -->
                <div class="flex flex-col gap-2">
                    <label for="email" class="text-[16px] font-semibold text-[#141514] tracking-[0.48px]">Email*</label>
                    <input id="email" name="email" type="email" required class="h-[56px] px-4 py-4 border border-[#cfd4d1] rounded-[4px] text-[14px] font-medium text-[#141514] focus:border-[#3b1329] focus:outline-none" />
                </div>

                <!-- Password -->
                <div class="flex flex-col gap-2 md:w-2/3">
                    <label for="password" class="text-[16px] font-semibold text-[#141514] tracking-[0.48px]">Password</label>
                    <div class="relative">
                        <input id="password" name="password" type="password" required class="h-[56px] w-full px-4 py-4 pr-12 border border-[#3b1329] rounded-[4px] text-[14px] font-medium text-[#141514] focus:border-[#3b1329] focus:outline-none" />
                        <button type="button" onclick="toggleCandidatePassword()" class="absolute right-4 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center" aria-label="Mostrar/Ocultar">
                            <img src="/static/images/eye-slash.png" alt="Toggle" class="w-full h-full" />
                        </button>
                    </div>
                    <div class="flex items-center gap-1 text-[#606261]">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6L9 17L4 12" stroke="#606261" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                </div>

                <!-- Continue button -->
                <div class="pt-4">
                    <button type="button" onclick="goCandidateStep2()" class="bg-[#f23e8e] text-[#13060e] px-6 py-3 rounded-full font-semibold text-[16px] h-[48px] hover:bg-[#d93578] transition-colors">Continue</button>
                </div>
            </form>
        </div>
    </main>

    <!-- Imagen de fondo decorativa (atrás del todo) -->
    <div class="fixed right-[108px] bottom-0 w-[520px] max-w-[45vw] pointer-events-none z-0">
        <img src="/static/images/employer-step1-people.png" alt="Decoración" class="w-auto h-auto object-cover" />
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('candidateRegistration');
            if(saved){
                try {
                    const data = JSON.parse(saved);
                    document.getElementById('nombre').value = data.nombre || '';
                    document.getElementById('apellido').value = data.apellido || '';
                    document.getElementById('email').value = data.email || '';
                    document.getElementById('password').value = data.password || '';
                } catch(e){ /* ignore parse errors */ }
            }
            // limpiar customValidity al escribir
            const emailInput = document.getElementById('email');
            const pwInput = document.getElementById('password');
            if (emailInput) emailInput.addEventListener('input', () => emailInput.setCustomValidity(''));
            if (pwInput) pwInput.addEventListener('input', () => pwInput.setCustomValidity(''));
        });
        function toggleCandidatePassword(){
            const input = document.getElementById('password');
            input.type = input.type === 'password' ? 'text' : 'password';
        }
        function isValidPassword(pw) {
            if (!pw || pw.length < 8) return false;
            const hasUpper = /[A-Z]/.test(pw);
            const hasLower = /[a-z]/.test(pw);
            const hasDigit = /\d/.test(pw);
            return hasUpper && hasLower && hasDigit;
        }
        function goCandidateStep2(){
            const form = document.getElementById('candidateStep1');
            if(!form.checkValidity()){ form.reportValidity(); return; }
            // validate password with native UI if needed
            const pwInput = document.getElementById('password');
            pwInput.setCustomValidity('');
            if (!isValidPassword(pwInput.value)) {
                pwInput.setCustomValidity('La contraseña debe tener mínimo 8 caracteres, al menos una letra, una mayúscula y un número.');
                pwInput.reportValidity();
                return;
            }
            const data = {
                nombre: document.getElementById('nombre').value,
                apellido: document.getElementById('apellido').value,
                email: document.getElementById('email').value,
                password: document.getElementById('password').value
            };
            localStorage.setItem('candidateRegistration', JSON.stringify(data));
            window.location.href = '/register/empleado/step2';
        }
    </script>
</body>
</html>